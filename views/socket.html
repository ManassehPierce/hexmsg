<!DOCTYPE html>
<html>
	<head>
		<title>Welcome to Jabber!</title>
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
		<script type="text/javascript">
			var socket = io();
			function sendMessage() {
				socket.emit("message", document.getElementById("chat_input").value);
					document.getElementById("chat_input").value = "";
			}
			document.addEventListener("DOMContentLoaded", function() {
				document.getElementById("chat_submit").addEventListener("click", sendMessage);
				document.getElementById("chat_input").addEventListener("keydown", function(key) {
					if (key.keyCode == 13) sendMessage();
				});
				socket.on('broadcast', function(data) {
					document.getElementById("messages").innerHTML += data;
				});
			});
		</script>
	</head>
	<body>
		<p>Hello, and welcome to Jabber. <br/>To start, please sent a message.</p>
		<div id='messages'></div>
		<label for="message"><b>Message: </b></label><input id='chat_input' type="text" name="message"/><input id='chat_submit' type="submit" name="submit"/>
	</body>
</html>